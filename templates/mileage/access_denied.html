{% extends "base.html" %}

{% block title %}Access Denied{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
        <div class="content-card mt-4">
            <div class="text-center py-5">
                <!-- Access Denied Icon -->
                <div class="mb-4">
                    <div class="access-denied-icon-circle mx-auto">
                        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="currentColor" class="bi bi-shield-slash-fill" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M1.093 3.093c-.465 4.275.885 7.46 2.513 9.589a11.777 11.777 0 0 0 2.517 2.453c.386.273.744.482 1.048.625.28.132.581.24.829.24s.548-.108.829-.24a7.159 7.159 0 0 0 1.048-.625 11.32 11.32 0 0 0 1.733-1.525L1.093 3.093zm12.215 8.215L3.128 1.128A61.369 61.369 0 0 1 5.073.56C6.157.265 7.31 0 8 0s1.843.265 2.928.56c1.11.3 2.229.655 2.887.87a1.54 1.54 0 0 1 1.044 1.262c.483 3.626-.332 6.491-1.551 8.616zm.338 3.046-13-13 .708-.708 13 13-.707.707z"/>
                        </svg>
                    </div>
                </div>
                
                <!-- Access Denied Message -->
                <h2 class="fw-bold mb-3">Access Denied</h2>
                <p class="text-muted mb-4">You do not have permission to access this page or resource.</p>
                
                <!-- Reason Details -->
                <div class="alert alert-warning mb-4 mx-auto" style="max-width: 500px;">
                    <div class="d-flex align-items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-exclamation-triangle-fill me-2" viewBox="0 0 16 16">
                            <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                        </svg>
                        <div>
                            <strong>Possible Reasons:</strong>
                            <ul class="mb-0 mt-1">
                                <li>Your account doesn't have the required permissions</li>
                                <li>You need to be logged in with a different account</li>
                                <li>The resource is restricted to specific user roles</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Status Information -->
                <div class="row justify-content-center mb-4">
                    <div class="col-md-8">
                        <div class="d-flex justify-content-between align-items-center border rounded p-3">
                            <div class="text-start">
                                <div class="small text-muted">Current Status</div>
                                <div class="fw-medium">
                                    {% if user.is_authenticated %}
                                        <span class="text-success">Logged In</span> as {{ user.username }}
                                    {% else %}
                                        <span class="text-danger">Not Logged In</span>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="text-end">
                                <div class="small text-muted">Required</div>
                                <div class="fw-medium text-warning">Authorized Access</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div class="d-grid gap-3 d-md-flex justify-content-center mt-4">
                    {% if user.is_authenticated %}
                        <a href="{% url 'logout' %}" class="btn btn-outline-primary btn-lg px-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-box-arrow-right me-2" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"/>
                                <path fill-rule="evenodd" d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"/>
                            </svg>
                            Switch Account
                        </a>
                        
                        <a href="{% url 'home' %}" class="btn btn-primary btn-lg px-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-house-door me-2" viewBox="0 0 16 16">
                                <path d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z"/>
                            </svg>
                            Go to Dashboard
                        </a>
                    {% else %}
                        <a href="{% url 'login' %}" class="btn btn-primary btn-lg px-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-box-arrow-in-right me-2" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M6 3.5a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 6.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-8A1.5 1.5 0 0 0 5 3.5v2a.5.5 0 0 0 1 0v-2z"/>
                                <path fill-rule="evenodd" d="M11.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H1.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"/>
                            </svg>
                            Login to Continue
                        </a>
                        
                        <a href="{% url 'register' %}" class="btn btn-outline-primary btn-lg px-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-person-plus me-2" viewBox="0 0 16 16">
                                <path d="M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H1s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C9.516 10.68 8.289 10 6 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
                                <path fill-rule="evenodd" d="M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z"/>
                            </svg>
                            Create Account
                        </a>
                    {% endif %}
                </div>
                
                <!-- Support Information -->
                <div class="mt-5 pt-4 border-top">
                    <p class="text-muted small">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="#2596be" class="bi bi-question-circle me-1" viewBox="0 0 16 16">
                            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 7 7zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 8z"/>
                            <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
                        </svg>
                        If you believe this is an error or need access to this resource, 
                        <a href="mailto:support@mileagetracker.com">contact our support team</a>.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* Access denied icon styling */
    .access-denied-icon-circle {
        width: 100px;
        height: 100px;
        background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 5px solid #dc3545;
    }
    
    .access-denied-icon-circle svg {
        color: #dc3545;
        width: 64px;
        height: 64px;
    }
    
    /* Alert styling */
    .alert-warning {
        background-color: #fff3cd;
        border-color: #ffecb5;
        color: #664d03;
        border-radius: 8px;
        border-left: 4px solid #ffc107;
    }
    
    .alert-warning ul {
        padding-left: 1.5rem;
        margin-bottom: 0;
    }
    
    .alert-warning li {
        margin-bottom: 0.25rem;
    }
    
    .alert-warning li:last-child {
        margin-bottom: 0;
    }
    
    /* Status information box */
    .border.rounded.p-3 {
        border-color: #dee2e6 !important;
        background-color: #f8f9fa;
    }
    
    /* Button styling */
    .btn-primary {
        background-color: #2596be;
        border-color: #2596be;
        border-radius: 8px;
        font-weight: 500;
    }
    
    .btn-primary:hover {
        background-color: #1d7a9c;
        border-color: #1d7a9c;
    }
    
    .btn-outline-primary {
        color: #2596be;
        border-color: #2596be;
        border-radius: 8px;
        font-weight: 500;
    }
    
    .btn-outline-primary:hover {
        background-color: #2596be;
        border-color: #2596be;
        color: white;
    }
    
    /* Content card */
    .content-card {
        background-color: white;
        border-radius: 12px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        padding: 2rem;
    }
    
    /* Text colors */
    .text-success {
        color: #198754 !important;
    }
    
    .text-danger {
        color: #dc3545 !important;
    }
    
    .text-warning {
        color: #ffc107 !important;
    }
    
    /* Support link */
    a {
        color: #2596be;
        text-decoration: none;
        font-weight: 500;
    }
    
    a:hover {
        text-decoration: underline;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
        .access-denied-icon-circle {
            width: 80px;
            height: 80px;
        }
        
        .access-denied-icon-circle svg {
            width: 48px;
            height: 48px;
        }
        
        .content-card {
            padding: 1.5rem;
        }
        
        .d-md-flex {
            flex-direction: column;
            gap: 1rem !important;
        }
        
        .btn-lg {
            width: 100%;
        }
        
        .col-md-8 {
            width: 100%;
            max-width: 100%;
        }
    }
</style>
{% endblock %}